import socket  
import time
import sys  
import os  

#grab the banner  
def grab_banner(ip_address,port):  
	# wait for 30 seconds if no response and try again
	try:
        	s=socket.socket() 
        	s.connect((ip_address,port))  
        	banner = s.recv(1024)  
        	#print ip_address + ':' + banner
        	#print banner
		return(1)
	except:
		return(0) 
	
 
def main():  
     	ip_address = 'localhost' 
     	port = eval(sys.argv[1])
	timeout = 4
	while(timeout > 0):
		connected = grab_banner(ip_address,port)
		if connected ==  1:
			break
		else:
			#print "Retrying in 15-20 secs"
			time.sleep(15) # repeat until connection happens or timeout is reached
		timeout -= 1
	print connected
 
if __name__ == '__main__':  
      	main()
